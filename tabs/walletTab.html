<div class="wallet-header">
  <h2><i class="fas fa-wallet"></i> Wallet Polygon Premium</h2>
  <p>Gerencie seus fundos na Polygon com elegância minimalista e funcionalidades completas</p>
</div>

<div class="wallet-main-container">
  <!-- Container Central de Saldo -->
  <div class="balance-main-container">
    <div class="balance-label">Saldo na Polygon Network</div>
    <div class="balance-display" id="currentChainBalance">0.00</div>
    <div class="balance-label">MATIC</div>
    <div style="font-size: 14px; color: var(--text-secondary); margin-top: 15px;" id="currentChainValue">
      ≈ $0.00 USD
    </div>
    <div class="balance-label" style="margin-top: 20px; font-size: 12px;">
      Conectado via: <span id="rpcConnectionStatus" style="color: var(--success-color);">Infra Identity RPC</span>
    </div>
  </div>
  
  <!-- Botões de Ação -->
  <div class="wallet-operations-grid">
    <div class="action-btn" onclick="showReceiveModal()">
      <i class="fas fa-qrcode"></i>
      <span>Receber</span>
    </div>
    <div class="action-btn" onclick="showSendModal()">
      <i class="fas fa-paper-plane"></i>
      <span>Enviar</span>
    </div>
    <div class="action-btn" onclick="refreshBalance()">
      <i class="fas fa-sync-alt"></i>
      <span>Atualizar</span>
    </div>
  </div>
  
  <!-- QR Code Container -->
  <div id="qrCodeContainer" style="display: none; text-align: center; margin: 30px 0;">
    <h4 style="color: var(--primary-color); margin-bottom: 15px; font-family: 'Cinzel', serif; font-size: 18px;">
      <i class="fas fa-qrcode"></i> QR Code para Recebimento
    </h4>
    <div class="qr-container" id="qrCodeCanvas"></div>
    <div class="address-display" style="margin: 20px auto; max-width: 500px; font-size: 12px;" id="qrAddressDisplay">
      <!-- Endereço será inserido aqui -->
    </div>
    <button class="btn btn-secondary btn-small" onclick="copyQRAddress()">
      <i class="fas fa-copy"></i> Copiar Endereço
    </button>
    <button class="btn btn-secondary btn-small" onclick="downloadQRCodeAsCard()" style="margin-left: 10px;">
      <i class="fas fa-download"></i> Salvar QR Code como Cartão de Luxo
    </button>
    <div style="font-size: 9px; color: var(--text-secondary); margin-top: 10px; font-style: italic;">
      este qrcode foi gerado através da licença vitalícia da AVZ Identity
    </div>
  </div>
  
  <!-- Formulário de Envio -->
  <div id="sendFormContainer" style="display: none; margin-top: 30px;">
    <h4 style="color: var(--primary-color); margin-bottom: 15px; font-family: 'Cinzel', serif; font-size: 18px;">
      <i class="fas fa-paper-plane"></i> Enviar Fundos na Polygon
    </h4>
    
    <div class="input-group">
      <label for="sendToAddress">Endereço de Destino</label>
      <input type="text" id="sendToAddress" placeholder="0x..." style="font-family: 'Courier New', monospace;">
    </div>
    
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
      <div class="input-group">
        <label for="sendAmount">Quantidade (MATIC)</label>
        <input type="number" id="sendAmount" placeholder="0.0" step="0.000001" min="0">
      </div>
      <div class="input-group">
        <label for="sendCurrency">Token</label>
        <select id="sendCurrency" style="padding: 18px 15px;">
          <option value="native">MATIC (Nativo)</option>
          <option value="usdc">USDC</option>
          <option value="usdt">USDT</option>
        </select>
      </div>
    </div>
    
    <div class="input-group">
      <label for="gasPrice">Preço do Gás (GWEI)</label>
      <input type="number" id="gasPrice" value="30" step="1" min="1">
      <div style="font-size: 11px; color: var(--text-secondary); margin-top: 5px;">
        Custo estimado: <span id="estimatedGasCost">$0.15</span>
      </div>
    </div>
    
    <div class="form-row" style="justify-content: center; margin-top: 20px;">
      <button class="btn btn-secondary btn-small" onclick="estimateGas()">
        <i class="fas fa-calculator"></i> Estimar Gás
      </button>
      <button class="btn btn-primary btn-small" onclick="sendTransaction()">
        <i class="fas fa-rocket"></i> Enviar Transação
      </button>
      <button class="btn btn-secondary btn-small" onclick="cancelSend()">
        <i class="fas fa-times"></i> Cancelar
      </button>
    </div>
  </div>
  
  <!-- Histórico de Transações -->
  <div style="margin-top: 40px;">
    <h4 style="color: var(--primary-color); margin-bottom: 15px; font-family: 'Cinzel', serif; font-size: 18px;">
      <i class="fas fa-history"></i> Histórico de Transações Polygon
    </h4>
    
    <div id="transactionHistory">
      <div class="tx-history-item">
        <div class="tx-info">
          <div class="tx-icon tx-in">
            <i class="fas fa-arrow-down"></i>
          </div>
          <div>
            <div style="font-weight: 500;">Recebimento</div>
            <div style="font-size: 11px; color: var(--text-secondary);">0x7f5...c3a • há 2 horas</div>
          </div>
        </div>
        <div class="tx-amount">+1.5 MATIC</div>
      </div>
      
      <div class="tx-history-item">
        <div class="tx-info">
          <div class="tx-icon tx-out">
            <i class="fas fa-arrow-up"></i>
          </div>
          <div>
            <div style="font-weight: 500;">Envio</div>
            <div style="font-size: 11px; color: var(--text-secondary);">0x9b2...f8e • há 1 dia</div>
          </div>
        </div>
        <div class="tx-amount">-0.8 MATIC</div>
      </div>
    </div>
    
    <button class="btn btn-secondary btn-small" onclick="loadMoreTransactions()" style="width: 100%; margin-top: 15px;">
      <i class="fas fa-redo"></i> Carregar Mais Transações
    </button>
  </div>

  <!-- ===== NOVA SEÇÃO DE TOKENS ===== -->
  <div class="tokens-section">
    <!-- Formulário para adicionar token manualmente -->
    <div class="info-card animate-element">
      <h3><i class="fas fa-plus-circle"></i> Adicionar Token</h3>
      <div class="input-group">
        <label for="manualTokenAddress">Endereço do Contrato</label>
        <input type="text" id="manualTokenAddress" placeholder="0x..." style="font-family: 'Courier New', monospace;">
      </div>
      <div class="input-group">
        <label for="manualTokenSymbol">Símbolo do Token</label>
        <input type="text" id="manualTokenSymbol" placeholder="EX: USDT, LINK...">
      </div>
      <button class="btn btn-primary" id="addManualToken">
        <i class="fas fa-plus"></i> Adicionar ao Portfólio
      </button>
    </div>

    <!-- Linha divisória de luxo -->
    <div class="tokens-divider"></div>

    <!-- Grade de Tokens -->
    <div class="tokens-grid" id="tokensGrid">
      <div class="token-card-luxury">
        <div class="token-card-header">
          <div class="token-symbol-luxury">USDC</div>
          <div class="token-icon-luxury">USD</div>
        </div>
        <div class="token-balance-luxury">0.000000</div>
        <div class="token-value-luxury">USD Coin</div>
        <div class="token-value-brl">R$ 0.00</div>
        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 10px; word-break: break-all;">
          0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
        </div>
        <div class="token-actions-luxury">
          <button class="btn btn-secondary btn-small" onclick="transferToken('0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174', 'USDC', 6)">
            <i class="fas fa-paper-plane"></i>
          </button>
          <button class="btn btn-secondary btn-small" onclick="refreshTokenBalance('0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174')">
            <i class="fas fa-sync-alt"></i>
          </button>
          <button class="token-remove-btn-luxury" onclick="removeToken('0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174')">
            <i class="fas fa-trash"></i> Remover Token
          </button>
        </div>
      </div>
    
      <div class="token-card-luxury">
        <div class="token-card-header">
          <div class="token-symbol-luxury">AVZ</div>
          <div class="token-icon-luxury">AVZ</div>
        </div>
        <div class="token-balance-luxury">69981992872999.460938</div>
        <div class="token-value-luxury">AVZ</div>
        <div class="token-value-brl">R$ 545859544409395.81</div>
        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 10px; word-break: break-all;">
          0xcE20F7cb738aA5Cf32441B2ba0EFBA1E6f42c0b4
        </div>
        <div class="token-actions-luxury">
          <button class="btn btn-secondary btn-small" onclick="transferToken('0xcE20F7cb738aA5Cf32441B2ba0EFBA1E6f42c0b4', 'AVZ', 18)">
            <i class="fas fa-paper-plane"></i>
          </button>
          <button class="btn btn-secondary btn-small" onclick="refreshTokenBalance('0xcE20F7cb738aA5Cf32441B2ba0EFBA1E6f42c0b4')">
            <i class="fas fa-sync-alt"></i>
          </button>
          <button class="token-remove-btn-luxury" onclick="removeToken('0xcE20F7cb738aA5Cf32441B2ba0EFBA1E6f42c0b4')">
            <i class="fas fa-trash"></i> Remover Token
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- ===== FIM DA NOVA SEÇÃO DE TOKENS ===== -->
</div>
